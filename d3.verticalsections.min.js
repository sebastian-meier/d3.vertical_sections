/*global d3:false */var verticalsections=function(e){function d(e){i=e;n=i.node().getBoundingClientRect().width;r=i.node().getBoundingClientRect().height;o=d3.scale.linear().range([0,n]).domain([0,f.max_x]);for(var t in f.columns)u[t]=d3.scale.linear().range([r/f.max_y,0]).domain([f.min[t],f.max[t]]);a[0]=d3.svg.area().x(function(e){return o(e.x)}).y0(r/f.max_y).y1(function(e){return u[0](e[f.columns[0]])});a[1]=d3.svg.area().x(function(e){return o(e.x)}).y0(r/f.max_y).y1(function(e){return u[1](e[f.columns[1]])});s=e.append("svg").attr("width",n).attr("height",r);var l=s.append("defs");for(var c=0;c<f.data.length;c++){var h=l.append("linearGradient").attr("id","grad_"+c).attr("x1",0).attr("y1",0).attr("x2",1).attr("y2",0);for(var p=0;p<f.data[c].length;p++)h.append("stop").attr("offset",Math.round(100/(f.data[c].length-1)*p)+"%").attr("style","stop-color:rgb("+Math.round(255/f.max[2]*f.data[c][p][f.columns[2]])+",0,"+Math.round(255-255/f.max[2]*f.data[c][p][f.columns[2]])+");stop-opacity:0.8");s.append("path").attr("transform","translate(0,"+r/f.max_y*c+")").datum(f.data[c]).attr("class","area "+f.columns[1]).attr("fill","url(#grad_"+c+")").attr("d",a[1]);s.append("path").attr("transform","translate(0,"+r/f.max_y*c+")").datum(f.data[c]).attr("class","area "+f.columns[0]).attr("d",a[0])}}var t={max_x:0,max_y:0,columns:[],min:[],max:[],data:[]},n,r,i,s,o,u=[],a=[],f=d3.tools.extend(t,e);if(f.max_x<1||f.max_y<1){f.max_y=f.data.length;f.max_x=f.data[0].length}for(var l in f.columns)f.max[l]=f.min[l]=undefined;for(var c in f.data)for(var l in f.columns){var h=d3.max(f.data[c],function(e){return e[f.columns[l]]});if(h>f.max[l]||f.max[l]===undefined)f.max[l]=h;var p=d3.min(f.data[c],function(e){return e[f.columns[l]]});if(p<f.min[l]||f.min[l]===undefined)f.min[l]=p}return d};